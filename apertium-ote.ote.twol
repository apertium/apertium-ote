Alphabet
 A √Ñ B C D E EÃ± F G H I J K L M N √ë O OÃ± P R S T U UÃ± W X Y Z
 a √§ b c d e eÃ± f g h i j k l m n √± o oÃ± p r s t u uÃ± w x y z  º
 %{—ä%}:0
 %{P%}:p %{P%}:m
 %{y%}:0 %{y%}:y
 %{√±%}:0 %{√±%}:√± ! could be combined with {y}
 %{ º%}:0 %{ º%}: º
 %{h%}:0 %{h%}:h
 %{n%}:0 %{n%}:n
 %{m%}:0 %{m%}:m ! could be combined with {n}
 %{ü™Ö%}:0         ! has incorporation
 %{Íû©%}:0         ! secondary verb form only if there's incorporation
 %{Íû®%}:0         ! secondary verb form
 %{‚Ñê%}:0         ! impersonal verb form
 %{G%}:g %{G%}:k
 %{B%}:b %{B%}:p %{B%}:u
 %{‚å•%}:0         ! triggers optional phonology
 %>:0
;

Sets

Vow = A √Ñ E EÃ± I O OÃ± U UÃ±
      a √§ e eÃ± i o oÃ± u uÃ± ;

Rules

"secondary verb form consonant lenition, except ts"
Cx:Cy <=> %{Íû®%}: [ %  | %>: ] ( [  º | %{ º%}: ] ) _ ;
      except
            _ s: ;
            _ i: %>: %{B%}: ;   ! avoids conflict with other rule
      where Cx in ( p %{P%} f b t k j )
            Cy in ( b   m   m m d g g )
      matched ;

"secondary verb form in ts:z (s)"
s:0 <=> %{Íû®%}: [ %  | %>: ] ( º) t: _ ;

"secondary verb form in ts:z (t)"
t:z <=> %{Íû®%}: [ %  | %>: ] ( º) _ s: ;

"secondary verb forms beginning in glottals get palatals h:hy"
%{y%}:y <=> %{Íû®%}: [ %  | %>: ] h _ ;

"secondary verb forms beginning in glottals get palatals  º: º√± (√±)"
%{√±%}:√± <=> %{Íû®%}: [ %  | %>: ] %{ º%}: _ ;

"secondary verb forms beginning in  º realise  º"
%{ º%}: º <=> %{Íû®%}: [ %  | %>: ] _ \%{P%}: ;

! FIXME: CHECK: this is just a guess
"secondary verb forms beginning in h realise h"
%{h%}:h <=> %{Íû®%}: [ %  | %>: ] _ \%{P%}: ;

"secondary verb forms with initial n"
%{n%}:n <=> %{Íû®%}: [ %  | %>: ] ( %{ º%}: )  _ ;
            [ %  | %>: ] %{ü™Ö%}: _ ;

"verbs that incorporate and have a secondary form with an initial nasal have the nasal surface in all persons, not just third person"
%{m%}:m <=> [ %  | %>: ] %{ü™Ö%}: _ ;

!"verbs that incorporate and have a secondary form with an initial nasal have the nasal surface in all persons, not just third person"
!Cx:Cy <=> [ %  | %>: ] %{ü™Ö%}: _ ;
!      where Cx in ( %{n%} %{m%} )
!            Cy in (   n     m   )
!      matched ;


"impersonal form mappings C1"
Cx:Cy <=> %{‚Ñê%}: [ %  | %>: ] _ \%{P%}: ;
      where Cx in ( p k x %{ º%}  º h )
            Cy in ( f j s   t   t t )
      matched ;

"impersonal form mappings C1"
Cx:Cy <=> %{‚Ñê%}: [ %  | %>: ] _ Cz: ;
      where Cx in ( %{ º%} )
            Cy in (    º   )
            Cz in ( %{P%} )
      matched ;

"impersonal form mappings C2"
Cx:Cy <=> %{‚Ñê%}: [ %  | %>: ] Ca: _ ;
      where Ca in ( %{ º%} %{ º%}   h     h   %{ º%}   t   %{ º%} h  º )
            Cx in ( %{n%} %{√±%} %{y%} %{√±%} %{P%} %{h%} %{y%} u u )
            Cy in (    º     t     h     h     b     h      º   h h )
      matched ;

"Delete non-œÉ1 √§,i,e before p1 indirect complement"
Vx:0 <=> Vow: \Vow:+ _ %>: %{‚å•%}: [ %{B%}: | %{G%}: ] ;
         Vow: \Vow:+ _ %>: %{‚å•%}: h uÃ± ;
     where Vx in ( √§ i e ) ;

"Delete h before deleted i,√§ before p1 indirect complement"
h:0 <=> _ [ i: | √§: ] %>: %{G%}: ;
    except
        %{‚Ñê%}: [ %  | %>: ] _ \%{P%}: ;

"Verbs in -pi delete p before {B}"
p:0 <=> _ i: %>: %{B%}: ;

"some contexts for {B}:p"
%{B%}:p <= p: i: %>: _ ;

"some contexts for {B}:b"
%{B%}:b <= n: Vow: %>: %{‚å•%}: _ ;
           :m/:0* %>: _ ;

"n:m before {B}"
n:m <=> _ Vow: %>: %{B%}: ;

"t:d before {B}"
t:d <=> _ Vow: %>: %{B%}: ;

"i (‚Üê*mi) to m before {B}"
i:m <=> _ %>: %{B%}: ;

! Resources:
! https://wiki.apertium.org/wiki/Starting_a_new_language_with_HFST#Enter_twol
! https://kitwiki.csc.fi/twiki/bin/view/KitWiki/HfstHome
! https://github.com/hfst/
! https://wiki.apertium.org/wiki/Twol
! https://wiki.apertium.org/wiki/Hfst

